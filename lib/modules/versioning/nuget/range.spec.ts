import { matches } from './range';

describe('modules/versioning/nuget/range', () => {
  describe('matches', () => {
    test.each`
      version           | range             | expected
      ${'foo'}          | ${'1'}            | ${false}
      ${'1'}            | ${'foo'}          | ${false}
      ${'1'}            | ${'1'}            | ${true}
      ${'1'}            | ${'2'}            | ${false}
      ${'2'}            | ${'1'}            | ${false}
      ${'1.2.3'}        | ${'[1.2.3]'}      | ${true}
      ${'1.2.3'}        | ${'[1.2.4]'}      | ${false}
      ${'1.2.3'}        | ${'[1.2.2]'}      | ${false}
      ${'1'}            | ${'*'}            | ${true}
      ${'0.1'}          | ${'1.*'}          | ${false}
      ${'2'}            | ${'1.*'}          | ${true}
      ${'1-beta'}       | ${'*'}            | ${false}
      ${'1-beta'}       | ${'*-*'}          | ${true}
      ${'1'}            | ${'1.*'}          | ${true}
      ${'1-beta'}       | ${'1.*'}          | ${false}
      ${'1'}            | ${'1.*-*'}        | ${true}
      ${'1-beta'}       | ${'1.*-*'}        | ${true}
      ${'1.2'}          | ${'1.2.*'}        | ${true}
      ${'1.2-beta'}     | ${'1.2.*'}        | ${false}
      ${'1.2'}          | ${'1.2.*-*'}      | ${true}
      ${'1.2-beta'}     | ${'1.2.*-*'}      | ${true}
      ${'1.2.3'}        | ${'1.2.3.*'}      | ${true}
      ${'1.2.3-beta'}   | ${'1.2.3.*'}      | ${false}
      ${'1.2.3'}        | ${'1.2.3.*-*'}    | ${true}
      ${'1.2.3-beta'}   | ${'1.2.3.*-*'}    | ${true}
      ${'1.2.3.4'}      | ${'1.2.3.*'}      | ${true}
      ${'1.2.3.4-beta'} | ${'1.2.3.*'}      | ${false}
      ${'1.2.3.4'}      | ${'1.2.3.*-*'}    | ${true}
      ${'1.2.3.4-beta'} | ${'1.2.3.*-*'}    | ${true}
      ${'1.0.0-alpha'}  | ${'1.0.0-*'}      | ${true}
      ${'1.0.0-beta'}   | ${'1.0.0-*'}      | ${true}
      ${'1.0.0'}        | ${'1.0.0-*'}      | ${true}
      ${'1.0.1-alpha'}  | ${'1.0.0-*'}      | ${true}
      ${'1.0.1'}        | ${'1.0.0-*'}      | ${true}
      ${'1'}            | ${'(1,)'}         | ${false}
      ${'1'}            | ${'[1,)'}         | ${true}
      ${'1'}            | ${'(1,2]'}        | ${false}
      ${'1'}            | ${'[1,2]'}        | ${true}
      ${'1'}            | ${'(1,2)'}        | ${false}
      ${'1'}            | ${'[1,2)'}        | ${true}
      ${'2'}            | ${'(1,2]'}        | ${true}
      ${'2'}            | ${'[1,2]'}        | ${true}
      ${'2'}            | ${'(1,2)'}        | ${false}
      ${'2'}            | ${'[1,2)'}        | ${false}
      ${'1'}            | ${'(,1)'}         | ${false}
      ${'1'}            | ${'(,1]'}         | ${true}
      ${'1'}            | ${'(,2)'}         | ${true}
      ${'1'}            | ${'(,2]'}         | ${true}
      ${'1'}            | ${'[1.*,]'}       | ${true}
      ${'1-beta'}       | ${'[1.*,]'}       | ${false}
      ${'1'}            | ${'(1.*,]'}       | ${false}
      ${'1'}            | ${'(1.*-beta*,]'} | ${true}
      ${'1-beta'}       | ${'(1.*-beta*,]'} | ${false}
      ${'1'}            | ${'[1.*-beta*,]'} | ${true}
      ${'1-beta'}       | ${'[1.*-beta*,]'} | ${true}
    `(
      'matches("$version", "$range") === $expected',
      ({ version, range, expected }) => {
        expect(matches(version, range)).toBe(expected);
      },
    );
  });
});
