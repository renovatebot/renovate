# Major Releases

## When will we push a major version?

- There is no set schedule for major version releases
- If we need to bump the **minor** (or major) version of Node.JS required to run Renovate
- If we have a few breaking changes "piling up"
- If we have a need to introduce something that will need wider visibility (i.e. some changes to `config:best-practices` )

## Preparing

- Determine what's in the next release by looking at the [Milestones view](https://github.com/renovatebot/renovate/milestones)

### Draft release notes

It is worthwhile drafting the release notes ahead of time, ideally on a GitHub Discussion or Issue, so you can preview what GitHub Flavoured Markdown thinks **??**.

For example see [how v42 release notes were drafted](https://github.com/renovatebot/renovate/discussions/38841#discussioncomment-14770478).

### Branching workflow

When in the days before the release is ready to land:

1. Create a temporary branch for release, eg `next-major` (from `main`)
   - This should **not** be a protected branch, as we will be rebasing it regularly
   - This should **not** be `next`, as that is reserved
1. Note issues to close as part of each PR
1. For each planned breaking change PR, rebase them + finalise the Git commit history (and force push them back to the PRs)
   - Including adding the `Closes #...`
1. Merge all planned breaking PRs to that branch
1. Create a pr from `next-major` branch to `main` (add `ci:fulltest` label)
1. Add closes issues keywords (from noted above, so they get auto-closed)
1. Wait for ci
1. Rebase release branch onto main if required and goto 6.
1. Use `git` CLI to push release branch to main
   - **NOTE** that this is a "I'm going to `git push` and bypass branch protection requirements" rather than `git push --force`
1. Wait for release
1. Take draft release notes, and prepend them to the autogenerated release notes from Semantic Release

> [!IMPORTANT]
> The final `git push` to `main` can be performed by users with the Maintain role, which includes all Renovate maintainers.

## Implementing

When ready to "push the button", **??**

## Post-release

- Monitor Discussions for early insights about post-release bugs that need to be resolved
